<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="referrer" content="no-referrer"> 
    <title>BOM Wave Monitor</title>
    <style>
        body { font-family: sans-serif; text-align: center; background: #f4f4f4; padding: 20px; }
        .container { background: white; padding: 20px; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); display: inline-block; max-width: 95%; }
        img { max-width: 100%; height: auto; border: 1px solid #ccc; margin-top: 10px; }
        .controls { margin-top: 15px; }
        button { padding: 10px 20px; cursor: pointer; background: #005a9c; color: white; border: none; border-radius: 4px; }
        button:hover { background: #003d6b; }
        .source-link { display: block; margin-top: 15px; font-size: 0.8em; color: #555; }
    </style>
</head>
<body>

<div class="container">
    <h2>Cape Sorell Wave Height</h2>
    
    <img id="bom-plot" src="" alt="Loading Wave Height Graph...">

    <div class="controls">
        <button onclick="refreshImage()">Refresh Now</button>
        <p id="status">Loading...</p>
    </div>

    <a class="source-link" href="https://www.bom.gov.au/products/IDT65014.shtml" target="_blank">
        View original source on BOM.gov.au
    </a>
</div>

<script>
    const baseUrl = "https://www.bom.gov.au/fwo/IDT65014/IDT65014.height.png";

    function refreshImage() {
        const img = document.getElementById('bom-plot');
        const status = document.getElementById('status');
        const timestamp = new Date().getTime();
        
        // Update source with cache-buster
        img.src = `${baseUrl}?t=${timestamp}`;
        
        const now = new Date();
        status.innerText = "Last checked: " + now.toLocaleTimeString();
    }

    // Load on start
    refreshImage();

    // Auto-refresh every 30 mins
    setInterval(refreshImage, 1800000);
</script>

</body>
</html>
